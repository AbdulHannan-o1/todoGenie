---
id: 0017
title: Fix MountError for rich.panel.Panel in TodoBanner
stage: red
date: 2025-12-06
surface: agent
model: (unknown)
feature: 001-cli-task-management
branch: app-core
user: abdulhannan
command: "The user is reporting a `MountError: Can't mount <class 'rich.panel.Panel'>; expected a Widget instance.`
This error occurs in `app.py` within the `TodoBanner`'s `compose` method, specifically when yielding a `rich.panel.Panel`.

The `Textual` framework expects `Widget` instances to be yielded from `compose` methods. While `rich.panel.Panel` is a `rich` renderable, it is not a `Textual` widget. `Textual` widgets are designed to be composed within the `Textual` application tree.

To display `rich` renderables like `Panel` within `Textual`, they need to be wrapped inside a `Textual` widget that can render arbitrary `rich` content. The `Static` widget is suitable for this purpose.

The `TodoBanner` class already inherits from `Static`, which is good. However, the `compose` method of `TodoBanner` is yielding a `rich.panel.Panel` directly. Instead, it should yield a `Static` widget that *contains* the `Panel`.

**Plan:**
*   **Task T052**: Modify the `TodoBanner`'s `compose` method in `app.py` to wrap the `rich.panel.Panel` within a `Textual` `Static` widget.

I will read the `app.py` file first to confirm the current implementation of `TodoBanner`."
labels: [bugfix, textual, mounterror]
links:
  spec: specs/001-cli-task-management/spec.md
  ticket: null
  adr: null
  pr: null
files:
  - app.py
tests:
  - none
---

## Prompt

```text
(venv) abdulhannan@fedora:~/data/development/openAi/todo-in-memory-app$ python app.py
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ /home/abdulhannan/data/development/openAi/todo-in-memory-app/venv/lib64/pyth â”‚
â”‚ on3.13/site-packages/textual/widget.py:4638 in _compose                      â”‚
â”‚                                                                              â”‚
â”‚   4635 â”‚                                                                     â”‚
â”‚   4636 â”‚   async def _compose(self) -> None:                                 â”‚
â”‚   4637 â”‚   â”‚   try:                                                          â”‚
â”‚ â± 4638 â”‚   â”‚   â”‚   widgets = [*self._pending_children, *compose(self)]       â”‚
â”‚   4639 â”‚   â”‚   â”‚   self._pending_children.clear()                            â”‚
â”‚   4640 â”‚   â”‚   except TypeError as error:                                    â”‚
â”‚   4641 â”‚   â”‚   â”‚   raise TypeError(                                          â”‚
â”‚                                                                              â”‚
â”‚ â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ locals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•® â”‚
â”‚ â”‚ error = MountError("Can't mount <class 'rich.panel.Panel'>; expected a   â”‚ â”‚
â”‚ â”‚         Widget instance.")                                               â”‚ â”‚
â”‚ â”‚  self = TodoBanner()                                                     â”‚ â”‚
â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯ â”‚
â”‚                                                                              â”‚
â”‚ /home/abdulhannan/data/development/openAi/todo-in-memory-app/app.py:16 in    â”‚
â”‚ compose                                                                      â”‚
â”‚                                                                              â”‚
â”‚    13 class TodoBanner(Static):                                              â”‚
â”‚    14 â”‚   """A widget to display the TODOGENIE banner."""                    â”‚
â”‚    15 â”‚   def compose(self) -> ComposeResult:                                â”‚
â”‚ â±  16 â”‚   â”‚   yield Panel(                                                   â”‚
â”‚    17 â”‚   â”‚   â”‚   Text("TODOGENIE", justify="center", style="bold green"),   â”‚
â”‚    18 â”‚   â”‚   â”‚   style="bold blue",                                         â”‚
â”‚    19 â”‚   â”‚   â”‚   width=self.app.console.width                               â”‚
â”‚                                                                              â”‚
â”‚ â•­â”€â”€â”€â”€â”€â”€ locals â”€â”€â”€â”€â”€â”€â”€â•®                                                      â”‚
â”‚ â”‚ self = TodoBanner() â”‚                                                      â”‚
â”‚ â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯                                                      â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
MountError: Can't mount <class 'rich.panel.Panel'>; expected a Widget instance.
(venv) abdulhannan@fedora:~/data/development/openAi/todo-in-memory-app$ 
```

## Response snapshot

Resolved `MountError` by wrapping `rich.panel.Panel` within a `Textual` `Static` widget in `TodoBanner`.

## Outcome

- âœ… Impact: Resolved `MountError` by wrapping `rich.panel.Panel` within a `Textual` `Static` widget in `TodoBanner`.
- ğŸ§ª Tests: No explicit tests were defined or run for this fix.
- ğŸ“ Files: Modified 1 file.
- ğŸ” Next prompts: User can now test the application to confirm the fix.
- ğŸ§  Reflection: `Textual` `compose` methods expect `Textual` `Widget` instances, not raw `rich` renderables.

## Evaluation notes (flywheel)

- Failure modes observed: `MountError` due to incorrect widget composition.
- Graders run and results (PASS/FAIL): None
- Prompt variant (if applicable): None
- Next experiment (smallest change to try): None
